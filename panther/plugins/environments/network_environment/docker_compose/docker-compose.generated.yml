# plugins/environments/docker_compose/templates/docker-compose-template.j2

version: '3.8'

services:
  
  picoquic_server:
    image: picoquic_rfc9000_panther:latest
    container_name: picoquic_server
    ports:
      
      - "4443:4443"
      
      - "8080:8080"
      
    environment:
      ROLE: server
      VERBOSITY: 
    command: "/opt/picoquic/./picoquicdemo -q /app/logs/server.qlog -c /opt/certs/cert.pem -k /opt/certs/key.pem -a ALPN -e implem -p 4443 -D -L -n servername > /app/logs/server.log 2>&1"
    volumes:
      - "outputs/experiment_2024-10-02_11-09-33/logs/picoquic_server/logs:/app/logs"
    networks:
      - panther_network
  
  picoquic_client:
    image: picoquic_rfc9000_panther:latest
    container_name: picoquic_client
    ports:
      
      - "5000:5000"
      
      - "8081:8081"
      
    environment:
      ROLE: client
      VERBOSITY: 
    command: "/opt/picoquic/./picoquicdemo -l - -T /path/to/ticket.pem -v 00000000 -c /opt/certs/cert.pem -k /opt/certs/key.pem -a ALPN -e implem -D -L -n servername 11.0.0.1 4443 > /app/logs/client.log 2>&1"
    volumes:
      - "outputs/experiment_2024-10-02_11-09-33/logs/picoquic_client/logs:/app/logs"
    networks:
      - panther_network
  

networks:
  panther_network:
    driver: bridge